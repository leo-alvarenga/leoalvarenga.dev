---
import { getAltUrl, getLangFromUrl, useTranslation } from "../config";
import { DEFAULT_OPEN_GRAPH, HOST_NAME, type OpenGraphOptions } from "../utils";

interface Props {
  options: OpenGraphOptions;
}

const { url } = Astro;
const [language] = getLangFromUrl(url);
const { t } = useTranslation({ language });

const { options } = Astro.props;
const {
  author = "",
  title = "",
  description = "",
  image = {
    default: DEFAULT_OPEN_GRAPH.image?.default,
    square: DEFAULT_OPEN_GRAPH.image?.square,
  },
  pathname = "/",
} = { ...DEFAULT_OPEN_GRAPH, ...options };

const ogUrl = HOST_NAME.concat(getAltUrl(url, language, pathname));
---

<meta property="og:title" content={t(title)} />
<meta property="og:author" content={t(author)} />
<meta property="og:description" content={t(description)} />

<meta property="og:type" content="website" />
<meta property="og:url" content={ogUrl} />

{
  image?.default && (
    <Fragment>
      <meta property="og:image" content={image?.default?.src} />
      <meta property="og:image:alt" content={image?.default?.alt} />
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="627" />
    </Fragment>
  )
}

{
  image?.square && (
    <Fragment>
      <meta property="og:image" content={image?.square?.src} />
      <meta property="og:image:alt" content={image?.square?.alt} />
      <meta property="og:image:width" content="400" />
      <meta property="og:image:height" content="400" />
    </Fragment>
  )
}
