---
import { Image } from "astro:assets";

import { getLangFromUrl, useTranslation } from "../../config";
import BasicLayout from "../../layouts/BasicLayout.astro";
import { STATUS_IMAGES } from "../../utils";
import { map } from "astro:schema";

interface Props {
  description: string;
  kind: keyof typeof STATUS_IMAGES;
  pageTitle?: string;
  redirect: string;
  redirectHref?: string;
  title: string;
}

const {
  description,
  kind,
  pageTitle,
  redirect,
  redirectHref = "/",
  title,
} = Astro.props;

const [language] = getLangFromUrl(Astro.url);
const { t } = useTranslation({ language });

const images = STATUS_IMAGES[kind];
---

<BasicLayout className="gap-8" pageTitle={t(pageTitle || "")}>
  <div class="flex flex-col items-center gap-8 mt-12 mb-16 md:my-0">
    <hgroup class="flex flex-col items-center gap-4 text-center">
      <h1 class="text-2xl md:text-4xl font-bold">{t(title)}</h1>

      <h4 class="text-lg md:text-xl">
        {t(description)}
      </h4>
    </hgroup>
  </div>

  {
    images.map((image) => (
      <Image
        alt="Not found"
        class="md:h-72 hidden"
        data-isimage="true"
        loading="eager"
        src={image}
      />
    ))
  }

  <a
    class={`
      flex gap-4 px-4 py-2
      items-center bg-crust group
      rounded-lg border border-mauve
      duration:500 transition-all
      hover:bg-mauve hover:text-crust
    `}
    href={redirectHref}
  >
    <i class="fa-solid fa-arrow-left"></i>
    <span class="group-hover:underline">{t(redirect)}</span>

    <i
      class={`
        fa-solid fa-shuttle-space -rotate-180
        max-w-0 overflow-hidden group-hover:max-w-8
        duration-250 transition-all animate-blink
      `}></i>
  </a>
</BasicLayout>

<script is:inline src="/scripts/image.js"></script>
